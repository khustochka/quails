- @page_title = 'Lifelist by taxonomy'

%h1= @page_title

- @years = @lifelist.years
= render 'partials/years'

%ul.horiz-list.filter-list
  %strong Places:
  %li= params[:locus].nil? ? 'All' : link_to('All', significant_params.merge(:locus => nil))
  - @lifelist.locations.each do |_, loc|
    %li= link_to_unless_current(loc.name_en, significant_params.merge(:locus => loc.code))

- if @lifelist.blank?
  %p No species
- else
  = render 'sorter'
  - i = 0
  - extract_families(@lifelist).each do |fam, species_list|
    %h5= "%s: %s" % [fam[:order].upcase, fam[:family]]
    %ol
      - species_list.each do |sp|
        %li.lifer_row{:value => i += 1}
          %span
            = species_link(sp)
            = name_sci(sp)
          %time= l(sp.date, :format => :long)
          = post_link('>>', sp.post)
