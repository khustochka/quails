- @robots = 'NOINDEX, NOARCHIVE'
- javascript 'lifelist'

- @page_title = if params[:year]
  - [t('lists.title.yearlist', year: params[:year]), params[:locus] ? "(#{@lifelist.locus.name})" : nil] * ' '
- elsif params[:locus]
  - t('lists.title.countrylist', country: @lifelist.locus.name)
- else
  - t('lists.title.lifelist')

%h1= page_header

- @years = @lifelist.years
= render 'partials/years'

%ul.horiz-list.filter-list
  %strong= t('.filter.places')
  %li= params[:locus].nil? ? content_tag(:span, t('misc.all')) : link_to(t('misc.all'), significant_params.merge(:locus => nil))
  - @locations.each do |loc|
    %li= link_to_or_span(loc.name, significant_params.merge(:locus => loc.slug))

- unless @lifelist.blank?
  %ul.horiz-list.filter-list
    %strong= t('.filter.sort_by')
    - [nil, :by_taxonomy].each do |sort|
      %li= link_to_or_span(t(sort || :by_date, scope: 'lists.menus.sort_option'), significant_params.merge(:sort => sort))
    %li
      %b= link_to 'Advanced lifelist', action: :advanced


- if @lifelist.blank?
  %p No species
- else
  = render "lists/basic/#{params[:sort] || 'by_date'}"
