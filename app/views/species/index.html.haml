-# no_viewport is for very wide pages, e.g. with table
- @no_viewport = true
- @body_class = 'wider'

- provide :add_shortcuts do
  %li= link_to "Legacy species", legacy_species_index_path

- @page_title = 'Species'

%h1= page_header

= render 'admin/shortcuts' if current_user.admin?

%table.neat_table
  %tr
    %th.align-right No
    %th Scientific name
    %th Names
    %th Taxon
    %th.align-center Code
    %th Url synonyms

  - @species.each do |species|
    %tr
      %td.align-right= species.index_num

      %td
        %div
          %i
            %b= link_to(species.name_sci, edit_species_path(species))
        %div.less-important
          = species.authority
        %div
          %small
            = %w(order family).map{|m| species.send(m)}.compact.join(" â—† ")
        -#%div
        -#  %small proto:
        -#  %i.less-important= species.protonym
      %td
        - %w(en ru uk).each do |lang|
          %div
            %i.less-important.monospace= "#{lang}:"
            = species.send("name_#{lang}")
      %td
        - taxon = species.high_level_taxon
        %div
          %b= taxon_link(taxon)
        %div
          = name_sci(taxon)
          -#%small.tag{class: "tag_#{taxon.category}"}= taxon.category
      %td.align-center
        %div
          %b= species.code
        - species.legacy_code.tap do |code|
          - if code.present?
            %div.less-important
              = surround '(', ')' do
                = code
      %td
        - species.url_synonyms.each do |syn|
          %div.less-important
            %i= syn.name_sci
= paginate @species
