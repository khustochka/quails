= simple_form_for @comment, html: {class: 'comment'} do |form|

  = render @comment.errors.extend(CommentErrors)

  = form.input :post_id, as: :hidden
  = form.input :parent_id, as: :hidden
  = form.input :name, @comment.persisted? ? {} : {input_html: { value: '' }, required: false, hint: 'Не заполняйте это поле!'}
  - if @comment.persisted?
    = form.input :url
  - else
    %div.input.string.required<
      %label.string.required{for: $negative_captcha}= t('simple_form.labels.comment.name')
      = text_field_tag $negative_captcha, @comment.name, required: true, class: 'string required'

  = form.input :send_email, label: t('simple_form.labels.comment.send_email')
  = simple_fields_for @comment.commenter || Commenter.new do |f2|
    = f2.input :email, label: false

  = form.input :text, label: false, input_html: {rows: 10, class: 'wiki_field'},
                hint: 'Немного HTML разрешено, включая &lt;a&gt;, &lt;img&gt;.'.html_safe
  - if @comment.persisted?
    = form.input :approved, label: 'Approved'
    %b= @comment.ip
  .buttons
    = default_submit_button(form)
