!!!

%html

  %head

    -# meta tags
    -# encoding
    %meta{ :content => "text/html; charset=UTF-8", "http-equiv" => "content-type" }

    - if @meta_thumbnail
      %meta{ property: "og:title", content: page_title }
      %meta{ property: "og:image", content: @meta_thumbnail }
      %meta{ name: "title", content: page_title }
      %meta{ name: "thumbnail", content: @meta_thumbnail }
      %link{ rel: 'image_src', href: @meta_thumbnail }

    - if @meta_description
      %meta{ property: "og:description", content: @meta_description }
      %meta{ property: "description", content: @meta_description }


    %title= page_title

    -# mobile viewport
    %meta{ name: 'viewport', content: 'width=device-width'}

    - unless admin_layout?

      -# robots
      - if @robots
        %meta{ name: 'robots', content: @robots}

      -# page information, keywords

      -# verifications (index only)

      -# rel canonical, self, alternate etc

      -# rss feeds
      - if @feed
        = auto_discovery_link_tag(:atom, {:controller => :feeds, :action => @feed, :format => :xml}, :title => @feed)

      -# OpenID (index only)

      -# sitemap (index only)

      -# favicon (index only?)

    -# csfr meta
    = csrf_meta_tags if @jquery

    -# stylesheets
    - stylesheet @minimal_layout ? 'minimal' : (admin_layout? ? 'admin' : 'public')

    = render 'partials/css_and_js'

    = GoogleAnalytics.render(self)

  %body{class: (@wider ? 'wider' : nil)}

    - if @facebook_like
      = FacebookSdk.render(self)

    #above-footer

      = render 'partials/header'

      - if !admin_layout? && $announcement
        %div.announcement
          :textile
            #{$announcement}

      .main

        = yield

    - cache :footer do
      = render 'partials/footer'
