- sort = params[:sort]
- @page_title = "Lifelist #{sort.nil? ? "by date" : sort.sub('_', ' ')}"

%h1= @page_title

= render 'lifelist/menus'

%ul.horiz-list.filter-list
  %strong Months:
  - (1..12).to_a.insert(0, nil).each do |m|
    %li
      - if m.nil?
        = params[:month].nil? ? 'All' : link_to('All', params.merge(:month => nil))
      - else
        = link_to_unless_current(m, params.merge(:month => m))

- if @lifelist.blank?
  %p No species
- else
  %table#lifelist.neat_table
    %tr
      %th &nbsp;
      %th
        Sort by:
        = link_to_unless_current('Classification ⇓', params.merge(:sort => 'class'))
      %th.align-right= params[:sort].nil? ? 'First seen ⇓' : link_to('First seen ⇓', params.merge(:sort => nil))
      %th.align-right= link_to_unless_current('Last seen ⇓', params.merge(:sort => 'last'))
      %th.align-right= link_to_unless_current('Count ⇓', params.merge(:sort => 'count'))
    = render sort.nil? || sort == 'last' ? 'by_date' : sort
