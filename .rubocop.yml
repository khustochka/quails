require:
  - rubocop-packaging
  - rubocop-performance
  - rubocop-rails

inherit_gem:
  rubocop-shopify: rubocop.yml

AllCops:
  TargetRubyVersion: 3.1
  DisabledByDefault: false
  NewCops: enable
  Exclude:
    - '**/tmp/**/*'
    - '**/templates/**/*'
    - '**/vendor/**/*'
    - '**/node_modules/**/*'
    # Additional exclude files by rubocop-rails_config
    - 'bin/**/*'
    #  - 'config/**/*'
    - 'db/**/*'
    - lib/tasks/flickraw.rake
    - "lib/flickraw-cached.rb"
    - 'lib/tasks/taxonomy/**/*'
    - 'lib/tasks/one-off/**/*'
    - config.ru
    - contest*.rb
    - config/boot.rb

# FIXME: revisit and fix!
Style/MethodCallWithArgsParentheses:
  Enabled: false
Layout/LineLength:
  Enabled: false
# end: revisit and fix!

# - My modification -
Style/PreferredHashMethods:
  Enabled: false

Style/FormatString:
  Enabled: false

Style/MultilineTernaryOperator:
  Enabled: false

Style/BarePercentLiterals:
  Enabled: false

Style/BlockDelimiters :
  Enabled: false

Style/WordArray:
  Enabled: false

Style/CommandLiteral:
  Enabled: false

Style/HashTransformKeys:
  Enabled: true

Style/HashTransformValues:
  Enabled: true

Style/RedundantReturn:
  Enabled: true
  AllowMultipleReturnValues: true

Style/Semicolon:
  Enabled: true
  AllowAsExpressionSeparator: true

Style/Send:
  Enabled: true

Style/GlobalVars:
  Exclude:
    - test/**/*.rb

Style/ClassAndModuleChildren:
  Exclude:
    - '**/test/**/*'
    - 'lib/core_ext/**/*.rb'

# Improved readability, but look into refactoring
Style/IfInsideElse:
  Enabled: false

# Improved readability
Style/NegatedIf:
  Enabled: false

Layout/ClosingHeredocIndentation:
  Enabled: true

Layout/EndAlignment:
  Enabled: true
  EnforcedStyleAlignWith: variable
  AutoCorrect: true

Layout/SpaceInsideBlockBraces:
  Enabled: false
  EnforcedStyleForEmptyBraces: space

Layout/ArrayAlignment:
  Enabled: true
  EnforcedStyle: with_fixed_indentation

# Readability
Layout/SpaceInsideArrayLiteralBrackets:
  Enabled: false

Lint/ErbNewArguments:
  Enabled: true

Lint/ShadowingOuterLocalVariable:
  Enabled: true

Lint/UriEscapeUnescape:
  Enabled: true

# Readability, but maybe leave only in tests
Lint/UselessAssignment:
  Enabled: false
#  Exclude:
#    - test/**/*.rb

Performance:
  Exclude:
    - '**/test/**/*'

Naming/VariableName:
  Enabled: false

Metrics/BlockNesting:
  Enabled: false

Rails/HasAndBelongsToMany:
  Enabled: false

# Mostly admin flashes
Rails/I18nLocaleTexts:
  Enabled: false

# Readability
Rails/Delegate:
  Enabled: false

# Grammar!
Rails/RequestReferer:
  Enabled: false

# FIXME: revisit and fix!
Rails/HelperInstanceVariable:
  Enabled: false

# I do this intentionally
Rails/SkipsModelValidations:
  Enabled: false

# Need to revisit carefully
Rails/TimeZone:
  Enabled: false
Rails/Date:
  Enabled: false

Lint/MissingCopEnableDirective:
  Enabled: true
  # Maximum number of consecutive lines the cop can be disabled for.
  # 0 allows only single-line disables
  # 1 would mean the maximum allowed is the following:
  #   # rubocop:disable SomeCop
  #   a = 1
  #   # rubocop:enable SomeCop
  # .inf for any size
  MaximumRangeSize: 4
